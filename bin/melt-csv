#!/usr/bin/env python3
"""Melt a CSV table across a column.
"""

import argparse
import logging

def main():
    logging.basicConfig(level=logging.INFO, format='%(levelname)-8s: %(message)s')
    parser = argparse.ArgumentParser(description=__doc__.strip())
    parser.add_argument('filename', help='CSV filename to process')
    parser.add_argument('column', help='Column name to melt around.')
    args = parser.parse_args()

    table = (petl.from_csv(args.filename)
             .melt(args.column))
    print(table.lookallstr())


if __name__ == '__main__':
    main()
